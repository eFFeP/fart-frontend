<!DOCTYPE html>
<html lang="it">
<head>
    <!-- ... altri contenuti ... -->
</head>
<body>
    <div class="container">
        <h1>Benvenuto in Smart TP</h1>
    </div>
    
    <div class="menu-icon">â˜°</div>
    <nav class="menu">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Profilo</a></li>
            <li id="adminPanel" style="display: none;"><a href="admin-panel.html">Pannello Amministrativo</a></li>
            <li><a href="#" id="logout">Logout</a></li>
        </ul>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const menuIcon = document.querySelector('.menu-icon');
            const menu = document.querySelector('.menu');
            const adminPanel = document.getElementById('adminPanel');
            const logoutButton = document.getElementById('logout');

            menuIcon.addEventListener('click', function() {
                menu.classList.toggle('open');
            });

            // Controlla il ruolo dell'utente
            const userRole = localStorage.getItem('userRole');
            if (userRole === 'admin' || userRole === 'superadmin') {
                adminPanel.style.display = 'block';
            }

            logoutButton.addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('token');
                localStorage.removeItem('userRole');
                window.location.href = 'index.html';
            });

            // Implementazione del logout automatico
            let inactivityTimer;

            function resetInactivityTimer() {
                clearTimeout(inactivityTimer);
                inactivityTimer = setTimeout(logout, 5 * 60 * 1000); // 5 minuti
            }

            function logout() {
                localStorage.removeItem('token');
                localStorage.removeItem('userRole');
                window.location.href = 'index.html';
            }

            // Resetta il timer su ogni interazione dell'utente
            ['click', 'touchstart', 'mousemove'].forEach(evt => 
                document.addEventListener(evt, resetInactivityTimer, false)
            );

            // Avvia il timer quando la pagina si carica
            resetInactivityTimer();
        });
    </script>
</body>
</html>
